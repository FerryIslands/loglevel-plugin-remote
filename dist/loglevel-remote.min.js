!function(e,t){if("function"==typeof define&&define.amd)define(["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var r={exports:{}};t(r,r.exports),e.remote=r.exports}}(this,function(e,t){"use strict";function r(e){try{return JSON.stringify(e)}catch(e){if(!o)try{var t={};t.a=t,JSON.stringify(t)}catch(e){o=e.message}if("TypeError"===e.name&&e.message===o)return"[Circular]";throw e}}function n(e){if(!Object.getOwnPropertyDescriptor||!Object.getPrototypeOf)return Object.prototype.toString.call(e).slice(8,-1);for(;e;){var t=Object.getOwnPropertyDescriptor(e,"constructor");if(void 0!==t&&"function"==typeof t.value&&""!==t.value.name)return t.value.name;e=Object.getPrototypeOf(e)}return""}Object.defineProperty(t,"__esModule",{value:!0});var o=void 0,a=function(e){var t="",o=0;return e.length>1&&"string"==typeof e[0]&&(t=(t=e[0].replace(/(%?)(%([sdjo]))/g,function(t,a,i,c){if(!a){var u=e[o+=1],l="";switch(c){case"s":l+=u;break;case"d":l+=+u;break;case"j":l=r(u);break;case"o":var s=r(u);"{"!==s[0]&&"["!==s[0]&&(s="<"+s+">"),l=n(u)+s}return l}return t})).replace(/%{2,2}/g,"%"),o+=1),e.length>o&&(t&&(t+=" "),t+=e.slice(o).join(" ")),t},i=function(){try{throw new Error("")}catch(e){return e.stack}},c=!!i(),u=[],l=!1,s=!1,remote=function(e,t){if(!e||!e.getLogger)throw new TypeError("Argument is not a root loglevel object");if(l)throw new TypeError("You can assign a plugin only one time");if(!XMLHttpRequest)return e;l=!0,(t=t||{}).url=t.url||window.location.origin?window.location.origin+"/logger":document.location.origin+"/logger",t.call=t.call||!0,t.timeout=t.timeout||5e3,t.trace=t.trace||["trace","warn","error"],t.clear=t.clear||1;for(var r={},n=0;n<t.trace.length;n+=1){var o=t.trace[n];r[o]=!0}var f=function e(){if(u.length&&!s){s=!0;var r=u.shift(),n=new XMLHttpRequest;if(n.open("POST",t.url+"?r="+Math.random(),!0),n.timeout=t.timeout,n.setRequestHeader("Content-Type","text/plain"),n.onreadystatechange=function(){4===n.readyState&&(200!==n.status&&u.unshift(r),s=!1,setTimeout(e,0))},!r.content){var o="";if(r.trace){var i=r.trace.split("\n");i.splice(0,t.clear+2),o="\n"+i.join("\n")}r.content=""+a(r.array)+o,r.array=[]}n.send(r.content)}},p=e.methodFactory;return e.methodFactory=function(e,n,o){var a=p(e,n,o);return function(){for(var n=arguments.length,o=Array(n),l=0;l<n;l++)o[l]=arguments[l];var s=c&&e in r?i():void 0;u.push({array:o,trace:s}),f(),t.call&&a.apply(void 0,o)}},e.setLevel(e.getLevel()),e};t.default=remote,e.exports=t.default});
!function(e,t){if("function"==typeof define&&define.amd)define(["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var r={exports:{}};t(r,r.exports),e.remote=r.exports}}(this,function(e,t){"use strict";function r(e){try{return JSON.stringify(e)}catch(e){if(!i)try{var t={};t.a=t,JSON.stringify(t)}catch(e){i=e.message}if("TypeError"===e.name&&e.message===i)return"[Circular]";throw e}}function o(e){return{}.toString.call(e).slice(8,-1)}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=!1,i=void 0,c=function(e){var t=[].concat(e),a="";if(t.length>1&&"string"==typeof t[0]){var i=t.shift();a=i.replace(/(%?)(%([sdo]))/g,function(e,o,n,a){if(!o){var i=t.shift(),c="";switch(a){case"d":c=""+i;break;case"o":c=r(i)}return c}return e})}return t.forEach(function(e){switch(a.length&&(a+=" "),void 0===e?"undefined":n(e)){case"object":a+=o(e),a+=r(e);break;default:a+=e}}),a=a.replace(/%{2,2}/g,"%")},s=function(){try{throw new Error("")}catch(e){return e.stack}},u=!!s(),remote=function(e,t){if(!e||!e.getLogger)throw new TypeError("Argument is not a root loglevel object");if(a)throw new TypeError("You can assign a plugin only one time");a=!0,(t=t||{}).url=t.url||window.location.origin+"/logger",t.call=t.call||!0,t.timeout=t.timeout||5e3,t.clear=t.clear||1,t.trace=t.trace||["trace","warn","error"];for(var r={},o=0;o<t.trace.length;o+=1){var n=t.trace[o];r[n]=!0}var i=[],l=!1,f=function e(){if(i.length&&!l){l=!0;var r=i.shift(),o=new XMLHttpRequest;if(o.open("POST",t.url+"?r="+Math.random(),!0),o.timeout=t.timeout,o.setRequestHeader("Content-Type","text/plain"),o.onreadystatechange=function(){4===o.readyState&&(200!==o.status&&i.unshift(r),l=!1,setTimeout(e,0))},r.trace){var n=r.trace.split("\n");n.splice(0,t.clear+2),r.message.push("\n"+n.join("\n")),o.send(c(r.message)),r.message.pop()}else o.send(c(r.message))}},p=e.methodFactory;return e.methodFactory=function(e,o,n){var a=p(e,o,n);return function(){for(var o=arguments.length,n=Array(o),c=0;c<o;c++)n[c]=arguments[c];var l=u&&e in r?s():void 0;i.push({level:e,message:n,trace:l}),f(),t.call&&a.apply(void 0,n)}},e.setLevel(e.getLevel()),e};t.default=remote,e.exports=t.default});
!function(e,t){if("function"==typeof define&&define.amd)define(["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var o={exports:{}};t(o,o.exports),e.remote=o.exports}}(this,function(e,t){"use strict";function o(e){try{return JSON.stringify(e)}catch(e){if(!n)try{var t={};t.a=t,JSON.stringify(t)}catch(e){n=e.message}if("TypeError"===e.name&&e.message===n)return"[Circular]";throw e}}function r(e){if(!Object.getOwnPropertyDescriptor||!Object.getPrototypeOf)return Object.prototype.toString.call(e).slice(8,-1);for(;e;){var t=Object.getOwnPropertyDescriptor(e,"constructor");if(void 0!==t&&"function"==typeof t.value&&""!==t.value.name)return t.value.name;e=Object.getPrototypeOf(e)}return""}Object.defineProperty(t,"__esModule",{value:!0});var n=void 0,a=function(e){var t="",n=0;return e.length>1&&"string"==typeof e[0]&&(t=(t=e[0].replace(/(%?)(%([sdjo]))/g,function(t,a,i,u){if(!a){var c=e[n+=1],s="";switch(u){case"s":s+=c;break;case"d":s+=+c;break;case"j":s=o(c);break;case"o":var l=o(c);"{"!==l[0]&&"["!==l[0]&&(l="<"+l+">"),s=r(c)+l}return s}return t})).replace(/%{2,2}/g,"%"),n+=1),e.length>n&&(t&&(t+=" "),t+=e.slice(n).join(" ")),t},i=function(e){for(var t=1;t<arguments.length;t+=1)for(var o in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],o)&&(e[o]=arguments[t][o]);return e},u=function(){try{throw new Error("")}catch(e){return e.stack}},c=!!u(),s=[],l=!1,f=!1,g=1,d="";window&&window.location&&(d=window.location.origin||""),!d&&document&&document.location&&(d=document.location.origin||"");var m={url:d+"/logger",call:!0,timeout:0,trace:["trace","warn","error"],clear:1,authorization:"",maxQueueSize:500,backoffStrategy:function(e){var t=2*e;return t>3e4?3e4:t},consoleLogTrashedMsg:!1,timestampFormatter:function(){return(new Date).toString()}},p=function(e,t){if(!e||!e.getLogger)throw new TypeError("Argument is not a root loglevel object");if(l)throw new TypeError("You can assign a plugin only one time");if(!window||!window.XMLHttpRequest)return e;l=!0;var r="ontimeout"in new window.XMLHttpRequest;t=i({},m,t);for(var n={},d=0;d<t.trace.length;d+=1){var p=t.trace[d];n[p]=!0}var w=function(e,r,n,i,u){if(r){var c=r.split("\n");c.splice(0,t.clear+2),r="\n"+c.join("\n")}s.push(o({timestamp:t.timestampFormatter(new Date),level:n,logger:u,log:""+a(e),args:e,stacktrace:r}))},h=function e(){if(s.length&&!f){f=!0;var o=s.shift(),n=void 0,a=new window.XMLHttpRequest;a.open("POST",t.url+"?r="+Math.random(),!0),a.setRequestHeader("Content-Type","text/plain"),t.authorization&&a.setRequestHeader("Authorization",t.authorization);var i=function(){a.abort(),s.unshift(o),f=!1,setTimeout(e,g)};a.onreadystatechange=function(){4===a.readyState&&(200!==a.status?(s.length<t.maxQueueSize||0===t.maxQueueSize&&0===s.length?s.unshift(o):t.consoleLogTrashedMsg&&console.log("Remote message trashed and not sent : ",o),g=t.backoffStrategy(g)):g=1,f=!1,n&&clearTimeout(n),setTimeout(e,g))},r&&(a.timeout=t.timeout,a.ontimeout=i),a.send(o),!r&&t.timeout&&(n=setTimeout(i,t.timeout))}},v=e.methodFactory;return e.methodFactory=function(e,o,r){var a=v(e,o,r);return function(){for(var o=arguments.length,i=Array(o),l=0;l<o;l++)i[l]=arguments[l];var f=c&&e in n?u():"";if(0!==s.length&&s.length>=t.maxQueueSize){var g=s.shift();t.consoleLogTrashedMsg&&console.log("Remote message trashed and not sent: ",g)}w(i,f,e,0,r),h(),t.call&&a.apply(void 0,i)}},e.setLevel(e.getLevel()),e},remote={};remote.apply=p,remote.name="loglevel-plugin-remote";var w=window?window.remote:void 0;remote.noConflict=function(){return window&&window.remote===remote&&(window.remote=w),remote},t.default=remote,e.exports=t.default});